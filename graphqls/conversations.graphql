query SINGLE_CONVERSATION($id: uuid!) {
  conversations_by_pk(id: $id) {
    id
    name
    description
    status
    company_id
    created_at
    updated_at
  }
}

query CONVERSATIONS_AGGREGATE(
  $limit: Int!
  $offset: Int!
  $where: conversations_bool_exp!
) {
  conversations_aggregate(limit: $limit, offset: $offset, where: $where) {
    nodes {
      id
      name
      description
      status
      created_at
      updated_at
      company {
        id
        name
      }
    }
  }
}

mutation INSERT_CONVERSATIONS($object: conversations_insert_input!) {
  insert_conversations_one(object: $object) {
    id
    name
    description
    created_at
  }
}

query MESSAGES_AGGREGATE(
  $limit: Int!
  $offset: Int!
  $order_by: [messages_order_by!]!
  $where: messages_bool_exp!
) {
  messages_aggregate(
    limit: $limit
    offset: $offset
    order_by: $order_by
    where: $where
  ) {
    nodes {
      id
      created_at
      content
      conversation_id
      user {
        id
        displayName
      }
    }
  }
}

# // Subscription for new messages only
# // order_by: { created_at: asc }
subscription MESSAGES_SUBSCRIPTION(
  $limit: Int!
  $order_by: [messages_order_by!]!
  $where: messages_bool_exp!
) {
  messages_aggregate(limit: $limit, order_by: $order_by, where: $where) {
    nodes {
      id
      created_at
      content
      user {
        id
        displayName
      }
    }
  }
}

mutation INSERT_MESSAGES($object: messages_insert_input!) {
  insert_messages_one(object: $object) {
    id
    created_at
    updated_at
  }
}
