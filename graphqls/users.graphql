mutation UPSERT_MY_LOCATION($objects: [user_location_insert_input!]!) {
  insert_user_location(
    objects: $objects
    on_conflict: { constraint: user_location_pkey, update_columns: location }
  ) {
    returning {
      user_id
      location
    }
    affected_rows
  }
}

query PROFILES_AGGREGATE(
  $limit: Int!
  $offset: Int!
  $order_by: [profiles_order_by!]
  $where: profiles_bool_exp
) {
  profiles_aggregate(
    limit: $limit
    offset: $offset
    order_by: $order_by
    where: $where
  ) {
    nodes {
      id
      conversation_id
      location
      is_online
      view_as
      settings
      companies {
        company {
          id
          name
        }
      }
      user_id
      user {
        id
        createdAt
        updatedAt
        activeMfaType
        avatarUrl
        defaultRole
        disabled
        displayName
        email
        emailVerified
        lastSeen
        locale
        roles {
          role
        }
      }
      tenant_id
      tenant {
        id
        name
      }
    }
  }
}

query PROFILES_BY_PK($id: uuid!) {
  profiles_by_pk(id: $id) {
    id
    is_online
    view_as
    settings
    tenant_id
    tenant {
      id
      name
    }
    user_id
    user {
      id
      createdAt
      updatedAt
      activeMfaType
      avatarUrl
      defaultRole
      disabled
      displayName
      email
      emailVerified
      lastSeen
    }
    companies {
      company {
        id
        name
      }
    }
    resumes(limit: 1) {
      id
      applications {
        id
      }
    }
  }
}

mutation UPDATE_PROFILES(
  $where: profiles_bool_exp!
  $_set: profiles_set_input!
) {
  update_profiles(where: $where, _set: $_set) {
    returning {
      id
      user {
        id
        updatedAt
      }
      tenant {
        id
        name
      }
    }
  }
}

mutation UPDATE_PROFILES_BY_PK(
  $pk_columns: profiles_pk_columns_input!
  $_set: profiles_set_input!
) {
  update_profiles_by_pk(pk_columns: $pk_columns, _set: $_set) {
    id
    user {
      id
      updatedAt
    }
    tenant {
      id
      name
    }
  }
}
